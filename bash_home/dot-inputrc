$include /etc/inputrc
# These 3 are from Philippe Blain
# color common prefix during completion
set colored-completion-prefix on
# add type suffix to items during autocompletion
set visible-stats on

set keyseq-timeout 100

# Readline can print a string at the start of the current line to "show"
# the editing mode.  We have it print an ANSI escape sequence to make the
# terminal emulator change the cursor.
set show-mode-in-prompt on
set vi-ins-mode-string \001\033[6 q\033]12;green\007\002
set vi-cmd-mode-string \001\033[2 q\033]12;yellow\007\002
set emacs-mode-string  \001\033[2 q\033]12;red\007\002

$if Bash
    # Causes references to previous commands to be expanded when pressing space
    # after something like `!!`  to be expanded as soon as a space is inserted.
    # Useful to confirm that it's the right thing for things like `!3:1` to get
    # the first argument of the 3rd previous command in the history
    #
    # It needs to be in a conditionnal so that it only happens with Bash
    # otherwise it will disable your ability to enter spaces in other things
    # that use readline like the Python interactive shell.
    Space: magic-space

    # color folder/files during completion
    # Only for Bash because otherwise we would get potentially weird coloring
    # since in Python, pressing <TAB><TAB> will yield completion candidates
    # that are assuredly not paths to files that exist.  They will get the
    # coloring of missing files which is usually flashing white on red background.
    #
    # In bash, we ensure that when readline is initialized, there is no coloring
    # specification for missing files.
    set colored-stats on
$endif

set editing-mode vi
    "\C-l": clear-screen
    "\C-g": abort
    # Vi mode specific keys

set editing-mode emacs
    # Change C-f and C-b to move by shell words
    # Originally, C-f is forward-char and M-f is forward-word but I use
    # the Fn-' to produce right-arrow.
    "\C-f": shell-forward-word # Originally forward-char
    "\C-b": shell-backward-word # Originally backward-char

    "\el": forward-word
    "\eh": backward-word

    # Wrap the whole command line in '$(...)'
    "\e\C-m": '\C-a "$(\C-e)"\C-a'

    # shell-expand-line is bound by default to '\e\C-e' but I like this better
    "\C- ": shell-expand-line

    # Emacs universal cancel key
    "\C-g": '\C-c'


$if Python
    # Surround the current input with help(_) and hit enter
    # - C-a to go to beginning of line
    # - Type "help("
    # - C-e to go to end of line
    # - Type ")" and Enter
    "\C-h": "\C-ahelp(\C-e)\n"
    set editing-mode emacs
$endif
# NOTE
# - \e\C-e: Expand subshell on command line
